var MyApp=MyApp||{},MyApp=function(){var a,b,c,d=[],e=function(a){$(".card-result-list .hidden").html(c).fadeIn(),$(".gamefield__message").html(a).fadeIn()},f=function(){$("#hit").prop("disabled",!0),$("#stand").prop("disabled",!0),$("#next-hand").prop("disabled",!0),$("#start").prop("disabled",!1),d=[]},g=function(){for(var a=52,b=0;a>b;b++){var c=Math.floor(Math.random()*a+1);-1===d.indexOf(c)?d.push(c):b--}return d},h=function(a){return a%13===0||a%13===11||a%13===12?10:a%13===1?11:a%13},i=function(){$(".gamefield__table__user .total-number").html(a)},j=function(){$(".gamefield__table__dealer .total-number").html(b)},k=function(){var c;b>21?(c="Dealer bust. You win!",j(),e(c)):b>a?(c="You lose. Dealer wins!",j(),e(c)):b===a?(c="Push. It's a draw!",j(),e(c)):a>b&&m()},l=function(){var b;a>21&&(b="You went bust. Dealer wins!",e(b),j(),f()),i()},m=function(){var a=h(d[0]);d=d.splice(1),b+=a;var c=$("<li>"+a+"</li>");$(".gamefield__table__dealer .card-result-list").append(c),j(),k()},n=function(){$(".gamefield__table__dealer").empty(),$(".gamefield__table__user").empty(),$(".gamefield__message").fadeOut(),$("#hit").prop("disabled",!1),$("#stand").prop("disabled",!1),$("#next-hand").prop("disabled",!1),$("#start").prop("disabled",!0),d=g();var e=h(d[0]),f=h(d[1]);a=e+f;var i=$('<h2>User cards:</h2><ul class="card-result-list"><li>'+e+"</li><li>"+f+'</li></ul><div class="total"><span class="total-label">Total: </span><span class="total-number">'+a+"</span></div>");$(".gamefield__table__user").append(i);var j=h(d[2]),k=h(d[3]);c=k,b=j+k;var l=$('<h2>Dealer cards:</h2><ul class="card-result-list"><li>'+j+'</li><li class="hidden">HIDDEN CARD</li></ul><div class="total"><span class="total-label">Total: </span><span class="total-number">'+j+" +...?</span></div>");$(".gamefield__table__dealer").append(l),d=d.splice(4)},o=function(){var b=h(d[0]);d=d.splice(1);var c=$("<li>"+b+"</li>");$(".gamefield__table__user .card-result-list").append(c),a=b+a,l()},p=function(){k(),f()},q=function(){$(".gamefield__table__dealer").empty(),$(".gamefield__table__user").empty(),$(".gamefield__message").html("Click on start to play!").fadeIn(),f()},r=function(){$("#start").click(function(){n()}),$("#hit").click(function(){o()}),$("#stand").click(function(){p()}),$("#next-hand").click(function(){q()})};return{gameEventListener:r}}();MyApp.gameEventListener();